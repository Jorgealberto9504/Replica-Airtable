/* apps/frontend/src/index.css */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================
   BASE: tokens MBQ + reset + tipografía
   ========================================= */
@layer base {
  :root{
    /* Paleta MBQ */
    --mbq-cyan:   #12b5d4;
    --mbq-azure:  #0ea5d2;
    --mbq-deep:   #173b7a;
    --mbq-navy:   #0e2147;

    --mbq-grad-from: var(--mbq-cyan);
    --mbq-grad-to:   var(--mbq-navy);

    /* color “brand” si necesitas rgb(...) */
    --brand: 14 165 210;

    /* Neutros y estados */
    --bg: #f6f9fc;
    --card: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --border: #e5e7eb;
    --success: #16a34a;
    --error: #dc2626;

    /* Compat primarios */
    --blue: var(--mbq-azure);
    --blue-700: #0b75a9;

    /* Otros */
    --logo-bg-size: clamp(800px, 80vw, 1400px);
    --logo-nav-size: 56px;
    --accent: #e1f4fb;
    --accent-100:#f2f8fc;
    --tabs-bg:#ffffff;
    --tabs-hover:#f7f9fc;
  }

  html, body, #root { height: 100%; }
  body {
    @apply antialiased text-slate-900 bg-slate-50;
    background: var(--bg);
    color: var(--text);
  }
}

/* =========================================
   COMPONENTES REUTILIZABLES
   ========================================= */
@layer components {
  /* ===== Botones ===== */
  .btn { @apply inline-flex items-center justify-center gap-2 px-3.5 py-2.5 rounded-xl border border-slate-200 bg-slate-100 font-semibold text-slate-900 transition hover:brightness-95 disabled:opacity-60 disabled:cursor-not-allowed; }
  .btn-primary { @apply btn border-0 text-white; background: linear-gradient(135deg, var(--mbq-grad-from), var(--mbq-grad-to)); }
  .btn-secondary { @apply btn bg-white; }
  .btn-sm { @apply px-3 py-1.5 text-xs leading-none; }
  .btn-danger { @apply btn bg-red-50 border-red-200 text-red-900; }
  .pill { @apply rounded-full; }
  .badge { @apply inline-flex items-center rounded-full px-2 py-1 text-xs font-bold; }
  .badge-green { @apply bg-emerald-50 text-emerald-700; }

  /* ===== Inputs / labels ===== */
  .label   { @apply text-sm text-slate-500; }
  .input   { @apply w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-cyan-300 focus:border-cyan-400; }
  .select  { @apply rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none; }
  .checkbox{ @apply inline-flex items-center gap-2; }
  .field   { @apply grid gap-1.5; }

  /* ===== Tarjetas / Helpers ===== */
  .card            { @apply bg-white rounded-2xl border border-slate-200 shadow-lg p-6 w-full max-w-md; }
  /* Aumentamos el peso/tamaño para títulos de página como “Bases” */
  .section-title   { @apply text-[22px] sm:text-[24px] font-extrabold text-slate-900; }
  .aside-title     { @apply text-xs font-bold uppercase tracking-wider text-slate-600 px-3 py-2; }
  .container-padded{ @apply max-w-7xl mx-auto px-4; }
  .content         { @apply max-w-6xl mx-auto px-4 py-4; }
  .page-center     { @apply min-h-full grid place-items-center p-6; }
  .muted           { @apply text-slate-500; }
  .main-wrap       { @apply flex min-h-[calc(100vh-70px)] bg-slate-50; }

  /* ===== Alerts ===== */
  .alert       { @apply rounded-lg px-3 py-2 text-sm mb-2; }
  .alert-error { @apply alert bg-red-100 text-red-700 border border-red-200; }
  .alert-info  { @apply alert bg-blue-50 text-blue-700 border border-blue-200; }

  /* ===== Topbar / Header ===== */
  .topbar        { @apply sticky top-0 z-10 flex items-center justify-between bg-white border-b border-slate-200 px-6 py-4; }
  .brand-logo    { height: var(--logo-nav-size); width: auto; display: block; }
  .brand-link    { @apply flex items-center gap-2 no-underline; }
  .header-center { @apply flex-1 flex justify-center; }
  .header-search { @apply max-w-[420px] w-full rounded-full bg-slate-50 border border-slate-200 px-4 py-2 focus:outline-none focus:ring-4 focus:ring-cyan-200 focus:border-cyan-400; }
  .header-actions{ @apply relative flex items-center gap-2; }
  .role-pill     { @apply px-2 py-1 rounded-full text-[11px] font-extrabold bg-indigo-50 text-indigo-800; }
  .avatar-btn    { @apply w-9 h-9 rounded-full border border-slate-200 bg-slate-100 font-extrabold cursor-pointer; }
  .dropdown-overlay { @apply fixed inset-0 z-40 bg-transparent; }
  .dropdown-panel   { @apply absolute right-0 top-12 z-50 w-72 bg-white border border-slate-200 rounded-xl shadow-lg overflow-hidden; }
  .dropdown-header  { @apply p-3 border-b border-slate-200; }
  .dropdown-email   { @apply text-xs text-slate-500; }
  .menu-item        { @apply w-full text-left bg-white px-3 py-2 rounded-lg cursor-pointer font-semibold hover:bg-slate-100; }
  .menu-item-eliminar { @apply w-full text-left bg-white px-3 py-2 rounded-lg cursor-pointer font-semibold text-red-700 hover:bg-slate-100; }

  /* ===== Sidebar Workspaces ===== */
  .ws-sidebar { @apply w-[260px] flex flex-col bg-white border-r border-slate-200; }

  /* ===== Listas y tarjetas (Bases / Users) ===== */
  .list-toolbar    { @apply flex items-center justify-between gap-3 my-4; }
  .toolbar-right   { @apply flex items-center gap-2; }
  .bases-grid      { @apply grid gap-3; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); }
  .base-card       { @apply bg-white border border-slate-200 rounded-xl p-3 shadow; }
  .base-card-head  { @apply flex items-center justify-between gap-2; }
  .base-card-title { @apply font-extrabold text-left cursor-pointer bg-transparent border-0 p-0 hover:underline; }
  .base-card-actions { @apply flex items-center gap-1.5; }
  .base-card-meta  { @apply mt-2 text-sm text-slate-600; }
  .icon-btn        { @apply border border-slate-200 bg-slate-50 rounded-md px-2 py-1 cursor-pointer hover:bg-slate-100; }
  .pagination      { @apply my-4 flex items-center justify-center gap-2; }

  /* Pills visibilidad */
  .pill-green { @apply bg-emerald-600 text-white px-2 py-0.5 rounded-full text-[11px] font-bold; }
  .pill-gray  { @apply bg-slate-400  text-white px-2 py-0.5 rounded-full text-[11px] font-bold; }

  /* ===== Chips (tabs simples y tags de columnas) ===== */
  .chip { @apply inline-flex items-center px-3 py-1.5 rounded-lg bg-white border border-slate-200 text-sm font-semibold; min-width: var(--mw, 140px); }
  .chip[aria-pressed="true"] { @apply bg-slate-100 border-slate-300; }

  /* ===== Modal genérico ===== */
  .modal-overlay,
  .modal-backdrop { @apply fixed inset-0 grid place-items-center p-4 bg-black/35 z-[1000]; }
  .modal-card   { @apply w-[680px] max-w-[95vw] bg-white rounded-2xl border border-slate-200 shadow-2xl overflow-hidden; }
  .modal-header,
  .modal-footer { @apply px-4 py-3 flex items-center justify-between; }
  .modal-body   { @apply p-4; }
  .modal-close  { @apply icon-btn; }

  /* =========================================
     Tabs estilo Airtable (TabsBar)
     ========================================= */
  .tabs-wrap { @apply relative mb-3; }
  .tabs-wrap::after {
    content:"";
    position:absolute; left:0; right:0; bottom:0; height:1px; background: var(--border);
    pointer-events:none;
  }

  .tabs-scroller {
    overflow-x: auto;
    overflow-y: hidden;
    -ms-overflow-style: none;
    scrollbar-width: none;
    background: var(--tabs-bg);
    border-radius: 0;
  }
  .tabs-scroller::-webkit-scrollbar { display: none; }

  .tabs-strip { @apply relative inline-flex items-center whitespace-nowrap p-0; border-bottom: 0; }

  .tab-slot { @apply inline-flex items-center relative; }

  .tab-btn {
    @apply relative bg-transparent text-slate-900 font-extrabold px-2.5 pr-7 py-2 rounded-t-md cursor-pointer border border-transparent;
    border-bottom: 0;
  }
  .tab-btn:hover { background: var(--tabs-hover); }

  .tab-btn[aria-pressed="true"] {
    background: var(--tabs-bg);
    border: 1px solid var(--mbq-navy);
    border-bottom: 0;
    margin-bottom: -1px; /* oculta la línea base */
    z-index: 2;
  }

  .tab-menu-btn {
    @apply absolute top-1/2 -translate-y-1/2 right-1 w-[18px] h-[18px] grid place-items-center bg-transparent rounded;
    opacity: 0; pointer-events: none;
    color: #0f172a;
    z-index: 3; /* encima de la pestaña activa */
  }
  .tab-slot.is-active .tab-menu-btn { opacity: .9; pointer-events: auto; }
  .tab-menu-btn:hover { @apply bg-black/10; }

  .tab-action-btn { @apply ml-2 bg-white border border-slate-200 rounded-md h-7 w-7 grid place-items-center cursor-pointer hover:bg-slate-100; }

  .tabs-scroll-btn {
    @apply absolute top-1/2 -translate-y-1/2 w-7 h-7 rounded-full border border-slate-200 bg-white shadow cursor-pointer grid place-items-center text-lg;
    z-index: 3;
  }
  .tabs-scroll-btn.left  { left: -6px; }
  .tabs-scroll-btn.right { right: -6px; }

  /* ===== AUTH / LOGIN (se mantiene por si lo usas) ===== */
  .auth-page {
    @apply min-h-[100dvh] grid place-items-center p-6;
    background: var(--bg);
  }
  .auth-card  {
    @apply bg-white border border-slate-200 rounded-3xl shadow-2xl overflow-hidden grid;
    width: min(980px, 96vw);
    grid-template-columns: 44% 56%;
  }
  .auth-illustration {
    @apply relative text-white p-24;
    background: linear-gradient(160deg, var(--mbq-grad-from), var(--mbq-grad-to));
    display: grid; grid-template-rows: auto 1fr; row-gap: 12px;
  }
  .auth-illustration::after{
    content:"";
    position:absolute; inset:-10% -10% 40% -10%;
    background:
      radial-gradient(120% 60% at 30% 0%, rgba(255,255,255,.20), transparent 60%),
      radial-gradient(120% 60% at 100% 20%, rgba(255,255,255,.12), transparent 70%);
    pointer-events:none;
  }
  .auth-logo { width: 72%; max-width: 340px; filter: drop-shadow(0 10px 30px rgba(0,0,0,.18)); }
  .auth-illu-copy h2 { @apply m-0 text-2xl font-extrabold; }
  .auth-illu-copy p  { @apply m-0 opacity-95; }
  .auth-form { @apply p-28 grid gap-3 content-start; }
  .auth-title{ @apply text-[26px] font-extrabold mb-1; }
  @media (max-width: 900px){
    .auth-card{ grid-template-columns: 1fr; }
    .auth-illustration{ height: 220px; grid-template-rows: 1fr auto; }
    .auth-logo{ width: 46%; }
  }

  /* =========================================
     EXTRAS: compatibilidad y Members (panel & modal)
     ========================================= */

  /* Alias de compatibilidad para botones viejos que usan "btn primary"/"btn danger". */
  .btn.primary { @apply border-0 text-white; background: linear-gradient(135deg, var(--mbq-grad-from), var(--mbq-grad-to)); }
  .btn.danger  { @apply bg-red-50 border-red-200 text-red-900; }

  /* Alert success + compat .alert.success */
  .alert-success { @apply alert bg-emerald-100 text-emerald-700 border border-emerald-200; }
  .alert.success { @apply bg-emerald-100 text-emerald-700 border border-emerald-200; }
  .alert.error   { @apply bg-red-100 text-red-700 border border-red-200; }

  /* Members */
  .members-panel { @apply w-[420px] p-4; }
  .invite-row { @apply flex items-center gap-2 mb-3; }
  .invite-row .input { @apply flex-1; }
  .members-list { @apply grid gap-2; }
  .member-row {
    @apply grid items-center gap-2 p-2 border border-slate-200 rounded-lg;
    grid-template-columns: 1fr; /* por defecto (solo lectura) */
  }
  .member-row.has-actions { grid-template-columns: 1fr auto auto; }
  .member-user  { @apply min-w-0; }
  .member-name  { @apply font-semibold truncate; }
  .member-email { @apply text-xs text-slate-500 truncate; }
  .member-actions { @apply flex items-center gap-2; }
  .role-chip { @apply px-2 py-1 rounded-full bg-slate-100 text-xs font-semibold justify-self-start; }

  /* ===== Menú contextual (overlay/panel) usado por TabsBar ===== */
  .context-overlay { position: fixed; inset: 0; background: transparent; z-index: 999; }
  .context-panel   {
    z-index: 1000;
    background: #fff;
    border: 1px solid var(--border);
    border-radius: 12px;
    box-shadow: 0 10px 20px rgba(0,0,0,.08);
    width: 220px;
    padding: 6px;
  }

  /* =========================================
     ConfirmToast (opcional, versión sin inline)
     ========================================= */
  .toast-overlay { @apply fixed inset-0 bg-black/35 z-[5000]; }
  .toast-card {
    @apply fixed z-[5010] top-6 left-1/2 -translate-x-1/2 w-[calc(100%-24px)] max-w-[520px] bg-white border border-slate-200 rounded-xl shadow-2xl p-4;
  }
  .toast-actions { @apply mt-3 flex items-center justify-end gap-2; }
  .toast-accent { @apply absolute left-0 top-0 bottom-0 w-1 rounded-l-xl; }
  .toast-accent--neutral { background: #e5e7eb; }
  .toast-accent--success { background: #10b981; }
  .toast-accent--info    { background: #3b82f6; }
  .toast-accent--warning { background: #f59e0b; }
  .toast-accent--danger  { background: #ef4444; }
}